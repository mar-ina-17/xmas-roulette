(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928],{4882:function(e,t,r){Promise.resolve().then(r.bind(r,5273))},4621:function(e,t,r){"use strict";r.d(t,{F:function(){return o}});var a=r(7657),n=r(4086);let o=()=>({delDoc:async(e,t)=>{try{let r=(0,n.JU)(a.db,e,t);await (0,n.oe)(r),console.log("Document with ID ".concat(t," deleted successfully"))}catch(e){console.error("Error deleting document ".concat(t,":"),e)}}})},4529:function(e,t,r){"use strict";r.d(t,{_:function(){return o}});var a=r(7657),n=r(4086);let o=()=>({getDoc:async e=>{let t=(0,n.hJ)(a.db,e);return(await (0,n.PL)(t)).docs.map(e=>({...e.data(),id:e.id}))}})},5273:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(7437),n=r(3621),o=r(1504),i=r(8250),s=(0,i.G)(function(e,t){let{htmlWidth:r,htmlHeight:n,alt:o,...i}=e;return(0,a.jsx)("img",{width:r,height:n,ref:t,alt:o,...i})});s.displayName="NativeImage";var l=r(7673),c=r(2265),d=(e,t)=>"loaded"!==e&&"beforeLoadOrError"===t||"failed"===e&&"onError"===t,u=r(2184),g=(0,i.G)(function(e,t){let{fallbackSrc:r,fallback:n,src:o,srcSet:i,align:g,fit:f,loading:h,ignoreFallback:m,crossOrigin:p,fallbackStrategy:v="beforeLoadOrError",referrerPolicy:w,...y}=e,x=void 0!==r||void 0!==n,b=null!=h||m||!x,z=d(function(e){let{loading:t,src:r,srcSet:a,onLoad:n,onError:o,crossOrigin:i,sizes:s,ignoreFallback:d}=e,[u,g]=(0,c.useState)("pending");(0,c.useEffect)(()=>{g(r?"loading":"pending")},[r]);let f=(0,c.useRef)(),h=(0,c.useCallback)(()=>{if(!r)return;m();let e=new Image;e.src=r,i&&(e.crossOrigin=i),a&&(e.srcset=a),s&&(e.sizes=s),t&&(e.loading=t),e.onload=e=>{m(),g("loaded"),null==n||n(e)},e.onerror=e=>{m(),g("failed"),null==o||o(e)},f.current=e},[r,i,a,s,n,o,t]),m=()=>{f.current&&(f.current.onload=null,f.current.onerror=null,f.current=null)};return(0,l.G)(()=>{if(!d)return"loading"===u&&h(),()=>{m()}},[u,h,d]),d?"loaded":u}({...e,crossOrigin:p,ignoreFallback:b}),v),_={ref:t,objectFit:f,objectPosition:g,...b?y:function(e,t=[]){let r=Object.assign({},e);for(let e of t)e in r&&delete r[e];return r}(y,["onError","onLoad"])};return z?n||(0,a.jsx)(u.m.img,{as:s,className:"chakra-image__placeholder",src:r,..._}):(0,a.jsx)(u.m.img,{as:s,src:o,srcSet:i,crossOrigin:p,loading:h,referrerPolicy:w,className:"chakra-image",..._})});g.displayName="Image";var f=function(e){var t={target:"confetti-holder",max:80,size:1,animate:!0,respawn:!0,props:["circle","square","triangle","line"],colors:[[165,104,246],[230,61,135],[0,199,228],[253,214,126]],clock:25,interval:null,rotate:!1,start_from_edge:!1,width:window.innerWidth,height:window.innerHeight};if(e&&(e.target&&(t.target=e.target),e.max&&(t.max=e.max),e.size&&(t.size=e.size),void 0!==e.animate&&null!==e.animate&&(t.animate=e.animate),void 0!==e.respawn&&null!==e.respawn&&(t.respawn=e.respawn),e.props&&(t.props=e.props),e.colors&&(t.colors=e.colors),e.clock&&(t.clock=e.clock),void 0!==e.start_from_edge&&null!==e.start_from_edge&&(t.start_from_edge=e.start_from_edge),e.width&&(t.width=e.width),e.height&&(t.height=e.height),void 0!==e.rotate&&null!==e.rotate&&(t.rotate=e.rotate)),"object"!=typeof t.target&&"string"!=typeof t.target)throw TypeError("The target parameter should be a node or string");if("object"==typeof t.target&&(null===t.target||!t.target instanceof HTMLCanvasElement)||"string"==typeof t.target&&(null===document.getElementById(t.target)||!document.getElementById(t.target) instanceof HTMLCanvasElement))throw ReferenceError("The target element does not exist or is not a canvas element");var r="object"==typeof t.target?t.target:document.getElementById(t.target),a=r.getContext("2d"),n=[];function o(e,t){e||(e=1);var r=Math.random()*e;return t?Math.floor(r):r}var i=t.props.reduce(function(e,t){return e+(t.weight||1)},0),s=function(){t.animate=!1,clearInterval(t.interval),requestAnimationFrame(function(){a.clearRect(0,0,r.width,r.height);var e=r.width;r.width=1,r.width=e})};return{render:function(){r.width=t.width,r.height=t.height,n=[];for(var e=0;e<t.max;e++)n.push(function(){var e=t.props[function(){for(var e=Math.random()*i,r=0;r<t.props.length;++r){var a=t.props[r].weight||1;if(e<a)return r;e-=a}}()];return{prop:e.type?e.type:e,x:o(t.width),y:t.start_from_edge?t.clock>=0?-10:parseFloat(t.height)+10:o(t.height),src:e.src,radius:o(4)+1,size:e.size,rotate:t.rotate,line:Math.floor(o(65)-30),angles:[o(10,!0)+2,o(10,!0)+2,o(10,!0)+2,o(10,!0)+2],color:t.colors[o(t.colors.length,!0)],rotation:o(360,!0)*Math.PI/180,speed:o(t.clock/7)+t.clock/30}}());return requestAnimationFrame(function e(){for(var r in a.clearRect(0,0,t.width,t.height),n)!function(e){if(e){var r=e.radius<=3?.4:.8;switch(a.fillStyle=a.strokeStyle="rgba("+e.color+", "+r+")",a.beginPath(),e.prop){case"circle":a.moveTo(e.x,e.y),a.arc(e.x,e.y,e.radius*t.size,0,2*Math.PI,!0),a.fill();break;case"triangle":a.moveTo(e.x,e.y),a.lineTo(e.x+e.angles[0]*t.size,e.y+e.angles[1]*t.size),a.lineTo(e.x+e.angles[2]*t.size,e.y+e.angles[3]*t.size),a.closePath(),a.fill();break;case"line":a.moveTo(e.x,e.y),a.lineTo(e.x+e.line*t.size,e.y+5*e.radius),a.lineWidth=2*t.size,a.stroke();break;case"square":a.save(),a.translate(e.x+15,e.y+5),a.rotate(e.rotation),a.fillRect(-15*t.size,-5*t.size,15*t.size,5*t.size),a.restore();break;case"svg":a.save();var n=new window.Image;n.src=e.src;var o=e.size||15;a.translate(e.x+o/2,e.y+o/2),e.rotate&&a.rotate(e.rotation),a.drawImage(n,-(o/2)*t.size,-(o/2)*t.size,o*t.size,o*t.size),a.restore()}}}(n[r]);(function(){for(var e=0;e<t.max;e++){var r=n[e];r&&(t.animate&&(r.y+=r.speed),r.rotate&&(r.rotation+=r.speed/35),(r.speed>=0&&r.y>t.height||r.speed<0&&r.y<0)&&(t.respawn?(n[e]=r,n[e].x=o(t.width,!0),n[e].y=r.speed>=0?-10:parseFloat(t.height)):n[e]=void 0))}n.every(function(e){return void 0===e})&&s()})(),t.animate&&requestAnimationFrame(e)})},clear:s}};r(7468);var h=r(4529),m=r(4621),p=r(7657),v=r(4086),w=()=>({addDocument:async(e,t,r)=>{try{await (0,v.ET)((0,v.hJ)(p.db,"gifts"),{giver:t,receiver:r}),console.log("Document written with ID: ")}catch(e){console.error("Error adding document: ",e)}}}),y=r(5072),x=()=>{let e;let[t,r]=(0,c.useState)([]),{getDoc:i}=(0,h._)(),s=e=>"Venci"==atob(l)?e.filter(e=>"Vladi"!==e.name):e;(0,c.useEffect)(()=>{i("receivers").then(e=>{r(s(e.filter(e=>e.name!==atob(l))))})},[]);let l="";{let e=new URL(window.location.href);l=new URLSearchParams(e.search).get("param")}let[d,u]=(0,c.useState)(!1),[p,v]=(0,c.useState)(""),[x,b]=(0,c.useState)(!1),z=(0,c.useRef)(null);(0,c.useEffect)(()=>{if(z.current&&d){let e=new f({target:"my-canvas"});return e.render(),()=>{e&&e.clear()}}},[d,z.current]);let{delDoc:_}=(0,m.F)(),{addDocument:k}=w();return(0,c.useEffect)(()=>{p&&p.id&&(k("gifts",atob(l),p.name),_("receivers",p.id))},[p]),(e=document.createElement("img")).src="/snow.png",(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{radius:[5,20],images:[e],wind:[-1,.5],speed:[.5,1]}),(0,a.jsxs)(n.xu,{className:"container h-screen flex flex-col items-center justify-center",children:[!x&&!d&&(0,a.jsx)(o.z,{onClick:()=>{b(!0),setTimeout(async()=>{b(!1);let e=t.filter(e=>e!==atob(l));for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}v(e[0]),u(!0)},4e3)},size:"lg",style:{fontSize:"3rem"},children:"\uD83C\uDF81"}),x&&(0,a.jsx)(g,{src:"/gift.gif",alt:"Fruit GIF",boxSize:"250px",objectFit:"cover"}),d&&(0,a.jsxs)(n.xu,{position:"relative",width:"100%",height:"100%",children:[(0,a.jsx)("canvas",{id:"my-canvas",ref:z,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1}}),(0,a.jsx)(n.xu,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2,textAlign:"center",children:(0,a.jsxs)("h1",{children:["Congrats, ",atob(l),"! You got ",p.name]})})]})]})]})}},7657:function(e,t,r){"use strict";r.d(t,{db:function(){return i}});var a=r(994),n=r(4086);let o=(0,a.ZF)({apiKey:"AIzaSyAbyJ9w9cigLJJ6Uy0R_RsOPT_RFR-X5ws",authDomain:"xmas-roulette-b30e8.firebaseapp.com",projectId:"xmas-roulette-b30e8",storageBucket:"xmas-roulette-b30e8.appspot.com",messagingSenderId:"714778163011",appId:"1:714778163011:web:19c7fe48dba651e06ce1f6",measurementId:"G-408RRXR6HS"}),i=(0,n.ad)(o)},7468:function(){}},function(e){e.O(0,[358,268,971,938,744],function(){return e(e.s=4882)}),_N_E=e.O()}]);